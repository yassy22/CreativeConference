---
import Layout from "../../layouts/Layout.astro";
import PlayerCard from "../../components/cards/players/PlayerCard.astro";

import fetchApi from "../../lib/strapi";

export async function getStaticPaths() {
  const players = await fetchApi({
    endpoint: "players",
    wrappedByKey: "data",
    query: {
      populate: ["champions", "champions.image", "image", "rol", "group"],
    },
  });

  const paths = players.map((player, i) => ({
    params: { id: player.id.toString() },
    props: {
      player,
    },
  }));

  return paths;
}

const { player } = Astro.props;

console.log(player.attributes.group);
---

<Layout>
  <PlayerCard players={player} />
</Layout>
